# Bird and Beans ゲーム改善要件定義

## 1. 目的
ユーザーフィードバックに基づいて、Bird and Beansゲームの操作性とゲームバランスを改善する。

## 2. 現状把握
現在の実装状況：
- 舌の最大長: 300px
- 舌が最大長に達するか、スペースキーを離すと縮む
- スペースキー押しっぱなしで連続して舌が伸びる
- マメの効果は地面に落下時に発動
- マメの出現確率: 通常80%、白20%、点滅5%
- スコアは10〜300点の範囲で高さに応じて動的に決定
- 舌を伸ばしている最中でも方向転換可能

## 3. 改善内容

### 3.1 舌の機能改善
1. **最大長の変更**: 300px → 700px
2. **即座に戻る仕様**: マメをキャッチしたら即座に舌が縮む
3. **キー入力制御**: スペースキー押しっぱなしで連続して伸びない（押し直しが必要）

### 3.2 マメの効果タイミング変更
1. **効果発動タイミング**: 地面落下時 → 舌でキャッチ時
2. **地面落下時の処理**: 白・点滅マメも通常マメと同じく床を1ブロック消す

### 3.3 マメの出現確率調整
- 通常マメ: 80%（変更なし）
- 白マメ: 20% → 15%
- 点滅マメ: 5%（変更なし）

### 3.4 スコアシステムの変更
- 動的スコア（10〜300点） → 4段階固定スコア
- 画面を4つのゾーンに分割：
  - 最上部ゾーン: 300点
  - 上部ゾーン: 100点
  - 中部ゾーン: 30点
  - 下部ゾーン: 10点

### 3.5 移動制御の変更
- 舌を伸ばしている間は反対方向を向けない
- 例：右に舌を伸ばしている時に左キーを押すと、右を向いたまま左に移動

## 4. 成功基準
1. 全ての改善点が正しく実装されている
2. 既存の機能（ゲームオーバー、スコア保存等）が正常に動作する
3. ゲームプレイがスムーズで、意図しない動作がない
4. コードが整理され、保守性が維持されている

## 5. 制約事項
- mainブランチでの作業は禁止
- 機能追加とリファクタリングは別コミット
- 細かい単位でのコミット実施
- 既存のゲームデザイン（見た目）は変更しない
- パフォーマンスを劣化させない